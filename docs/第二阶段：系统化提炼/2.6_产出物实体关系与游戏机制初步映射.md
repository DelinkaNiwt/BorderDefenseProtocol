---
标题：2.6 产出物实体关系与游戏机制初步映射
版本号: v2.1
更新日期: 2026-02-15
最后修改者: Claude Opus 4.6
标签: [参考资料][实体关系][游戏设计][未锁定][用户未确认]
摘要: 基于v1.4文档，从游戏实现视角重新分类30个条目为四类（游戏实体/数据属性/游戏系统/概念），重组36条关系为三层结构（实体间/概念辅助/纯世界观），以游戏对象类型为中心重绘关系图。
---

# 2.6 产出物实体关系与游戏机制初步映射

## 文档说明

**数据来源**：第一阶段全部笔记文档：
- 1.1_境界触发者基础背景笔记
- 2.1_Trion概念定义
- 1.2_Trion能量系统笔记
- 1.3_触发器机制笔记
- 1.4_Trion战斗体系统笔记
- 1.5_BORDER触发器介绍笔记
- 1.6_副作用系统笔记
- 1.7_Trion兵系统笔记
- 1.9_敌对势力近界民角色笔记
- 2.5_Trion战斗系统流程

**置信度分层说明**：

| 内容层次 | 置信度 | 说明 |
|---------|--------|------|
| 实体提取与关系梳理（30个条目的分类、36条关系的三层结构） | **高** — 已完成 | 基于第一阶段笔记的系统化整理，逻辑自洽 |
| "游戏对象类型"列和"设计决策分层" | **低** — 待验证方向 | 初步的技术映射猜想，需要第四阶段（RimWorld框架理解与技术选型）验证后才能确认或修正 |

**版本演进**：本文档是v1.4的重审版本。v1.4将30个条目统一称为"实体"，但实际混杂了三种本质不同的东西。本版本从**游戏实现视角**重新分类。

**分类方法论**：判定一个条目属于哪个分类的标准是——它在RimWorld游戏引擎中是否会创建为具体的Def或对象实例：

| 分类 | 判定标准 | 数量 |
|------|---------|------|
| **游戏实体** | 会在RimWorld中创建为具体Def/对象（ThingDef、HediffDef、GeneDef、FactionDef等） | 15 |
| **数据属性** | 附着在实体上的数值/参数，不独立存在 | 4 |
| **游戏系统** | 由多个实体和逻辑组合而成的状态机，不是单一Def | 1 |
| **概念** | 不创建任何游戏对象，仅作为设计参考或世界观背景 | 10 |

---

## 一、分类总览

### 争议项判定表

以下条目的分类与v1.4不同，是本次重审的关键决策：

| 条目 | v1.4分类 | 本版判定 | 理由 |
|------|---------|---------|------|
| **战斗体** | 实体 | **游戏系统** | 游戏中不创建新pawn，而是通过hediff+视觉切换实现同一pawn的状态转换 |
| **真身** | 实体 | **概念标签** | v1.4自己写"就是小人本身，无特殊意义"——它只是pawn正常状态的别名 |
| **Trion中继中心** | 实体 | **概念标签** | 映射为"无"，本质是"战斗体状态下的头部位"这个语义标签 |
| **Trion供给系统** | 实体 | **概念标签** | 映射为"无"，本质是"战斗体状态下的心脏部位"这个语义标签 |
| **触发器(总概念)** | 实体 | **概念** | v1.4自己标注为"概念总称"，不是具体游戏对象 |
| **Trion表现** | 实体 | **概念** | 是"输出物类别"的总称，具体输出物才是实体 |
| **Trion** | 实体 | **数据/资源** | 在游戏中表现为Need值或资源数值，不是独立对象 |
| **紧急脱离** | 实体 | **触发芯片子类型** | v1.4自己写"实质上就是触发芯片"，不应单独列为独立实体类别 |
| **惑星国家** | 实体 | **概念** | 是"某些敌对派系"的统称，不是一个具体FactionDef |

---

## 二、游戏实体清单（15个）

会在RimWorld中创建为具体Def/对象。

### A. Pawn属性（3个）

| # | 实体 | 定义 | 游戏对象类型 | 备注 |
|---|------|------|-------------|------|
| 2 | **Trion腺体** | 位于心脏旁的不可见器官，产生和储存Trion，约20岁后停止发育 | GeneDef | 虽然描述像身体部位，但游戏中设计为基因 |
| 3 | **Trion接收器（触发角）** | 人工植入物，增强Trion量和质 | HediffDef (植入体) | |
| 16 | **副作用（Side Effect）** | 高Trion量对大脑/感官影响产生的人类能力扩展，分S/A/B/C四级 | TraitDef (+ AbilityDef) | 特性，可能附带Ability |

### B. 装备/物品（4个）

| # | 实体 | 定义 | 游戏对象类型 | 备注 |
|---|------|------|-------------|------|
| 5 | **触发体** | 可手持或穿戴的物理硬件平台，含功能配置系统 | ThingDef (武器或附件层衣物) | 触发体是附带特殊组件"芯片槽位"的武器或附件层衣物（二选一，待深入考虑） |
| 6 | **触发芯片** | 小型芯片状功能配置模块 | ThingDef (物品/组件属性) | 类似"Unique Weapon和Weapon Trait"的关系，决定触发体当前功能 |
| 8 | **黑触发器** | 由创造者倾注生命力+意志创造的特殊触发器，不可量产、不可调控 | ThingDef (触发体的特殊变体) | 本质同触发体，但获取方式为事件生成 |
| 17 | **紧急脱离（Bail Out）** | BORDER触发器内置标配的触发芯片，战斗体失效时自动传送真身到安全位置 | 触发芯片的一个具体实例 | 实质上就是触发芯片，但因其核心机制地位单独列出 |

### C. Pawn单位（2个）

| # | 实体 | 定义 | 游戏对象类型 | 备注 |
|---|------|------|-------------|------|
| 14 | **Trion兵** | 近界民制造的无意识人工战斗单位，完全由Trion构成 | PawnKindDef (机械体) | 用Trion代替电力作为供能 |
| 20 | **近界民** | 近界各惑星国家的智慧生物，与人类同样拥有Trion | PawnKindDef (敌对派系人类) | 属于惑星国家派系袭击者中的人类pawn |

### D. 建筑（2个）

| # | 实体 | 定义 | 游戏对象类型 | 备注 |
|---|------|------|-------------|------|
| 15 | **制造设施** | 触发器/Trion兵/建筑等的转化媒介 | ThingDef (工作台) | 本质是一种特殊的工作台/"机床" |
| 9 | **母触发器（星触发器）** | 维持近界星球存在的核心能源系统 | ThingDef (建筑) | 具体机制未定，未来计划，但将是个建筑 |

### E. 派系（2个）

| # | 实体 | 定义 | 游戏对象类型 | 备注 |
|---|------|------|-------------|------|
| 18 | **BORDER** | 地球防卫组织，含本部（对抗派）和玉狛支部（和平派） | FactionDef (中立) | |
| 19a | **敌对惑星国家派系（多个）** | 近界中各惑星国家在游戏中的具体派系实例 | FactionDef (敌对) | 如Aftokrator、Galopoula等，每个是独立的FactionDef |

### F. 事件/载具（2个）

| # | 实体 | 定义 | 游戏对象类型 | 备注 |
|---|------|------|-------------|------|
| 24 | **门（Gate）** | 连接地球与近界的空间传送通道 | 特效+生成机制 | 用特定特效表现的传送/生成单位的"地图落点" |
| 25 | **远征船** | 使用Trion作为燃料的跨界航行载具 | ThingDef (穿梭机) | 类似奥德赛DLC的穿梭机 |

---

## 三、数据属性清单（4个）

附着在实体上的数值/参数，不同属性的宿主范围不同，不独立存在为游戏对象。

| # | 属性 | 定义 | 性质 | 宿主 | 备注 |
|---|------|------|------|------|------|
| 1 | **Trion** | 具有能量-物质二象性的生物能量，整个体系的基石 | Need/资源值 | 跨实体通用（Pawn/装备/建筑/载具） | 技术选型未定；Pawn用Need/Stat/Gene数值/自定义资源池，装备/建筑/载具可能需要CompRefuelable或自定义Comp |
| 1a | **Trion天赋** | 表示不同单位的Trion天生个体差异的影响因子 | 影响因子 | Pawn专属 | 技术选型未定，待权衡 |
| 1b | **Trion输出功率** | 表示该单位允许执行的某些行为的阈值 | 阈值 | Pawn专属 | 技术选型未定，待权衡 |
| 1c | **Trion恢复速率** | 表示该单位的Trion自然恢复速度的影响因子 | 影响因子 | Pawn专属 | 技术选型未定，待权衡 |

---

## 四、游戏系统（1个）

由多个实体和逻辑组合而成的状态机，不是单一Def。

### 战斗体状态系统

| 项目 | 内容 |
|------|------|
| **原条目** | #10 战斗体 |
| **原定义** | 由Trion物质化构成的人工替代躯体，承载使用者意识 |
| **游戏本质** | 同一pawn的状态切换系统，非独立实体 |
| **组成** | hediff生命周期 + 数据快照 + 视觉切换（衣物+特效） |
| **核心机制** | hediff负责状态控制和伤害/健康逻辑，衣物+特效负责视觉表现 |

**状态切换流程**：

```
真身状态 ──触发器激活──→ 战斗体状态 ──解除/破裂──→ 真身状态
   │                        │                        │
   │ 记录当前数据快照        │ hediff管逻辑           │ 移除战斗体hediff
   │                        │ 衣物+特效管视觉         │ 恢复数据快照
   │                        │ 新增hediff不回传真身     │
```

**关键设计决策**（来源：R9/R11/R13/R16/R17）：
- 不替换pawn实例，只操作数据和视觉
- hediff是战斗体的逻辑载体，衣物+特效是视觉载体
- 伤害隔离 = 战斗体解除时批量移除新增hediff

---

## 五、概念清单（10个）

不创建任何游戏对象，仅作为设计参考或世界观背景。

### A. 术语总称（2个）

| # | 概念 | 定义 | 性质 | 说明 |
|---|------|------|------|------|
| 4 | **触发器（总概念）** | Trion能量的物理接口与转化表现系统 | 术语总称 | "触发体+触发芯片+Trion表现"系统的概念统称 |
| 7 | **Trion表现** | 芯片激活后Trion能量物化的具体形态 | 输出类别 | 触发芯片激活后的各种输出物的总称（武器/子弹/特效等） |

### B. 语义标签（3个）

| # | 概念 | 定义 | 性质 | 说明 |
|---|------|------|------|------|
| 11 | **真身** | 使用者原始肉体 | 状态标签 | pawn正常状态的别名，"就是小人本身，无特殊意义" |
| 12 | **Trion中继中心** | 战斗体脑部组件，传输控制信号（弱点之一） | 语义标签 | 战斗体状态下"头"部位的别名，部位缺失时触发特定事件 |
| 13 | **Trion供给系统** | 战斗体心脏处组件，调节Trion流动（弱点之一） | 语义标签 | 战斗体状态下"心脏"部位的别名，部位缺失时触发特定事件 |

### C. 角色标签（2个）

| # | 概念 | 定义 | 性质 | 说明 |
|---|------|------|------|------|
| 21 | **战斗员** | 使用触发器进行战斗的个体 | 角色标签 | 按定位分攻击手/枪手/射手/狙击手等 |
| 22 | **操作员** | 非战斗支援人员 | 角色标签 | 操作特殊建筑为战斗提供辅助的非战斗人员 |

### D. 分类总称/世界观（3个）

| # | 概念 | 定义 | 性质 | 说明 |
|---|------|------|------|------|
| 19 | **惑星国家** | 近界中绕黑暗之海运行的国家实体 | 分类总称 | 多个敌对派系的统称（Aftokrator、Galopoula等） |
| 23 | **近界** | 平行于地球的异世界宇宙 | 世界观 | 纯世界观背景设定 |
| 26+27 | **等级制度/战斗职位** | BORDER的S/A/B/C评级 + 攻击手/枪手等职位 | 不实现 | 纯世界观，不考虑设计 |

---

## 六、实体关系图

以Trion为中心，按游戏实体类型组织的关系图：

```
核心资源层:
  Trion腺体(Gene) ──产生──→ [Trion(跨实体通用)] ←──增强── Trion接收器(植入体)
                                  │
                    ┌─────────────┼─────────────┐
                    ↓             ↓             ↓
               触发体(装备)   制造设施(工作台)  副作用(特性)
               ├─触发芯片      │               └─高Trion天赋触发
               ├─紧急脱离      ↓
               │           Trion兵(机械体,自身Trion池)
               ↓
          战斗体状态系统
          (hediff+视觉切换)
          ├─伤害隔离
          ├─弱点(头/心脏)
          └─紧急脱离传送

Trion跨实体承载:
  黑触发器(装备) ──装备时叠加──→ 使用者Trion池
  远征船(载具) ←── Trion作为燃料
  母触发器(建筑) ←── 巨型Trion储能

派系与事件层:
  BORDER(中立派系)    敌对惑星国家派系
                      ├─近界民(人类pawn)
                      ├─Trion兵(机械体)
                      └─通过"门"发动袭击

特殊:
  黑触发器 ←── 殖民者战斗死亡事件(中期)
```

---

## 七、关系矩阵

原文档36条关系按游戏实现需求重新分为三层。

### A. 实体间关系（需实现，14条）

这些关系连接的两端都是游戏实体或数据属性，需要编写代码实现。

| # | 关系 | 类型 | 说明 |
|---|------|------|------|
| R1 | Trion腺体 → Trion | 产生 | 代谢转化产生，通过进食/休息恢复 |
| R2 | Trion接收器 → Trion | 增强 | 大幅提升Trion的量和质 |
| R5 | Trion → 副作用 | 触发 | 高Trion量是副作用产生的必要条件 |
| R6 | 黑触发器 → Trion | 叠加 | 创造者Trion被结晶化，使用时叠加到使用者总量 |
| R7 | 触发体 ⊃ 触发芯片 | 装载 | 触发体提供槽位装载芯片 |
| R11 | 触发体 → 战斗体系统 | 激活 | 触发器激活后生成战斗体 |
| R12 | 触发体 → Trion | 消耗 | 触发器运作消耗Trion（占用+维持+使用） |
| R16 | 战斗体系统 → hediff | 伤害隔离 | 战斗体伤害不回传真身（核心机制） |
| R18 | 紧急脱离 → 传送 | 保护 | 战斗体失效时传送真身到安全位置 |
| R19 | 制造设施 → Trion兵 | 制造 | 通过制造设施将Trion转化为Trion兵 |
| R21 | 近界民派系 → Trion兵 | 操控 | 近界民创造并操控Trion兵 |
| R33 | 门 → 袭击 | 生成 | 空间传送通道，由近界民掌控 |
| R34 | 远征船 → Trion | 消耗 | 使用Trion作为燃料 |
| R35 | 死亡事件 → 黑触发器 | 生成 | 创造者倾注全部生命力创造 |

### B. 概念辅助关系（设计参考，11条）

这些关系涉及概念，不需要独立代码，但解释了"为什么这样设计"。

| # | 关系 | 类型 | 说明 | 对实现的影响 |
|---|------|------|------|-------------|
| R3 | Trion → 战斗体 | 构成 | 战斗体完全由Trion物质化构成 | 解释战斗体的世界观来源 |
| R4 | Trion → Trion兵 | 构成 | Trion兵完全由Trion物质化构成 | 解释Trion兵的世界观来源 |
| R8 | 触发芯片 → Trion表现 | 激活产出 | 芯片激活后Trion能量物化为具体形态 | 解释触发芯片的输出是什么 |
| R9 | 触发体 ⊃ 真身 | 收容 | 激活时真身被收容在触发体内异空间 | 世界观解释，实现为数据快照+视觉切换 |
| R10 | 触发体 ⊃ 内置系统 | 包含 | 雷达/通讯/紧急脱离/战斗体收容为内置标配 | 复用R7逻辑 |
| R13 | 战斗体 ↔ 真身 | 互换 | 激活时互换，解除时回滚 | 世界观解释，实现为状态切换 |
| R14 | 战斗体 ⊃ Trion中继中心 | 包含 | 脑部组件，被破坏则战斗体失效 | 头部位缺失时的事件逻辑 |
| R15 | 战斗体 ⊃ Trion供给系统 | 包含 | 心脏处组件，被破坏则战斗体失效 | 心脏部位缺失时的事件逻辑 |
| R17 | 副作用 → 战斗体 | 跟随 | 副作用与意识绑定，自然跟随意识存在于战斗体中 | 无需特殊机制，特性自然跟随pawn |
| R20 | Trion兵 ≠ 战斗体 | 本质区别 | 无意识武器 vs 意识载体 | 概念区分，无实现需求 |
| R37 | 普通触发器 vs 黑触发器 | 对比 | 技术手段 vs 生命意志，可量产 vs 独一无二 | 概念对比，影响获取方式设计 |

### C. 纯世界观关系（不实现，11条）

全部为组织结构、等级归属等世界观关系，不需要实现。

| # | 关系 | 类型 | 说明 | 状态 |
|---|------|------|------|------|
| R23 | BORDER ⊃ 本部 + 玉狛支部 | 组织结构 | 对抗派 vs 和平派的内部张力 | 不做 |
| R24 | BORDER ⊃ 等级制度 | 管理 | S/A/B/C四级评级 | 不做 |
| R25 | 战斗员 → 战斗职位 | 分类 | 按触发器使用方式分为6种职位 | 不做 |
| R26 | 操作员 → 战斗员 | 支援 | 提供通讯/感知共享/战术分析 | 不做 |
| R27 | Aftokrator → Galopoula/Rhodokhroun | 宗主-附属 | 附属国提供Trion兵和执行任务 | 不做 |
| R28 | 近界民 ↔ BORDER | 对抗/合作 | 核心冲突轴线 | 暂不做 |
| R29 | 惑星国家 ⊃ 母触发器 | 依赖 | 每个星球国家依赖母触发器维持存在 | 不做 |
| R30 | 母触发器 → "神" | 需要 | 需高Trion个体持续供能 | 不做 |
| R31 | 战斗员 → 触发器 | 使用 | 战斗员通过触发器进入战斗状态 | 不做 |
| R32 | 战斗员 → 等级制度 | 归属 | 战斗员按能力被评定为不同等级 | 不做 |
| R36 | 黑触发器 → 使用者 | 兼容性 | 需要与创造者人格兼容才能激活 | 暂不考虑 |

---

## 历史修改记录

| 版本 | 日期 | 修改摘要 | 签名 |
|------|------|---------|------|
| v2.1 | 2026-02-15 | 跨实体认知修正：(1)数据属性说明"附着在Pawn上"改为"附着在实体上，不同属性的宿主范围不同"；(2)Trion(#1)宿主从"Pawn"改为"跨实体通用（Pawn/装备/建筑/载具）"，备注补充不同实体的技术方案方向；Trion天赋/输出功率/恢复速率明确标注"Pawn专属"；(3)实体关系图：[Trion(Need)]改为[Trion(跨实体通用)]，Trion兵标注"自身Trion池"，新增"Trion跨实体承载"区块（黑触发器叠加、远征船燃料、母触发器储能）。 | Claude Opus 4.6 |
| v2.2 | 2026-02-15 | 移除§七A"游戏实现要点"列、§八核心设计洞察、§九设计决策分层、§十明确不做的部分至独立汇总文件（BDP技术选型建议汇总.md） | Claude Opus 4.6 |
| v2.0 | 2026-02-09 | 从游戏视角重审全文档：(1)将30个条目从统一"实体"重分类为四类（15游戏实体/4数据属性/1游戏系统/10概念）；(2)新增分类方法论和争议项判定表；(3)重组36条关系为三层（14实体间/11概念辅助/11纯世界观）；(4)重绘以Trion为中心的游戏实体关系图；(5)保留核心设计洞察和设计决策分层，微调分类引用 | Claude Opus 4.6 |
| v1.4 | 2026-02-08 | 回溯修正：基于"2.2_真身-战斗体-真身领域过程分析.md"结论，(1)R17副作用关系类型"复制"改为"跟随"；(2)§五A核心架构图"战斗体破裂"改为"解除/破裂" | Claude Opus 4.6 |
| v1.3 | 2026-02-08 | 用户补充三、四部分备注（删除R22/R38，关系总数38→36）；修正计数和排版；填入关系矩阵游戏机制映射建议；新增第五部分"设计理解总结" | Claude Opus 4.6 |
| v1.2 | 2026-02-08 | 排版优化：新增实体编号修正（n→1a/1b/1c），实体总数更新为30个，清理表格多余空格，微调关系图ASCII对齐 | Claude Opus 4.6 |
| v1.1 | 2026-02-08 | 填写"一、二"里的部分信息 | user |
| v1.0 | 2026-02-08 | 创建文档。基于第一阶段全部10份笔记文档，抽象出27个核心实体（分8类）和38条关键关系（分7类），附6条核心设计洞察。所有表格增加"游戏机制映射"和"备注"字段留空供用户填写。 | Claude Opus 4.6 |
