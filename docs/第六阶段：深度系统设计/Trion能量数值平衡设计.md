---
标题：Trion能量数值平衡设计
版本号: v1.0
更新日期: 2026-02-26
最后修改者: Claude Opus 4.6
标签: [文档][数值设计][用户确认中][未完成][未锁定]
摘要: BDP模组Trion能量系统的数值平衡设计。覆盖五级天赋容量分布、三个派生属性公式、芯片Trion经济参数（占用/激活/射击/持续消耗）。以中级天赋max=800为基准，大数值体系，紧凑型战斗体验。
---

# Trion能量数值平衡设计

## 前置文档

| 文档 | 关系 |
|------|------|
| 2.4 Trion能量全生命周期过程分析 | 世界观依据 |
| 6.1 Trion能量系统详细设计 | 技术架构 |
| 武器芯片设计说明书 | 芯片参数模板 |

## 设计原则

| 原则 | 说明 |
|------|------|
| **紧凑型体验** | 中级天赋战斗员打完一场中等战斗后剩余30-50%可用量，需有意识控制消耗 |
| **中级为基准** | 所有平衡以中级天赋（原作参数~7）为锚点 |
| **大数值体系** | max量级700-1000，所有消耗可用整数表达 |
| **正态分布** | 天赋连续随机值，整体呈正态分布，分5级 |

---

## 1. 五级天赋与Trion容量

### 1.1 正态分布参数

```
分布类型：正态分布（截断）
中心值 μ = 700
标准差 σ = 250
下限截断：120（低于此值无法维持战斗体）
```

### 1.2 五级天赋容量范围

| 天赋等级 | 原作参数范围 | Trion容量(max)范围 | 分布区间 | 出现概率 |
|---------|------------|-------------------|---------|---------|
| 极低 | ~1-2 | 120-200 | μ-2σ以下 | ~5% |
| 低 | ~3-5 | 320-480 | μ-1σ ~ μ-2σ | ~20% |
| 中 | ~6-8 | 600-800 | μ±1σ | ~50% |
| 高 | ~9-12 | 880-1200 | μ+1σ ~ μ+2σ | ~20% |
| 极高 | ~13+ | 1280+ | μ+2σ以上 | ~5% |

### 1.3 极端值说明

- 千佳级异常值（原作38）不在正态分布内，作为特殊事件/剧情角色处理
- 极低天赋（120-200）：只能维持战斗体一小会儿，搭载不了几个芯片，几乎承担不起战斗消耗
- 触发角植入可在基础容量上叠加增强（通过Stat聚合）

---

## 2. 三个派生属性

### 2.1 TrionCapacity（容量）

见第1节。通过GeneDef.statOffsets贡献到Stat系统，CompTrion.RefreshMax()读取。

### 2.2 TrionRecoveryRate（恢复速率）

**设计约束**：中级天赋从0恢复到满 = 1天。高容量者恢复时间更长（原作设定）。

**公式**：`RecoveryRate = 25.3 × √max`（单位：每天恢复的Trion绝对值）

> 原因：恢复速率按容量平方根比例增长，使高容量者恢复满的时间更长。
> 系数25.3使中级天赋（max≈700）恰好约1天恢复满。

| 天赋等级 | max(中位) | RecoveryRate(/天) | 从0恢复满所需天数 |
|---------|----------|-------------------|-----------------|
| 极低 | 160 | 320 | 0.5天 |
| 低 | 400 | 506 | 0.79天 |
| 中 | 700 | 670 | 1.04天 |
| 高 | 1040 | 816 | 1.27天 |
| 极高 | 1400 | 947 | 1.48天 |

**实现方式**：RecoveryRate通过GeneDef.statOffsets直接配置为固定值（不在运行时计算平方根）。
上表用于指导GeneDef配置时填入的statOffsets值。

### 2.3 TrionOutputPower（输出功率）

**设计约束**：作为行为阈值，决定能否使用特定芯片。独立于容量的小数值体系。

| 天赋等级 | OutputPower范围 | 可使用的芯片等级 |
|---------|---------------|----------------|
| 极低 | 1-2 | 仅基础芯片 |
| 低 | 3-5 | 基础+普通芯片 |
| 中 | 6-8 | 所有普通芯片 |
| 高 | 9-12 | 普通+高级芯片 |
| 极高 | 13+ | 所有芯片（含特殊芯片） |

**实现方式**：同样通过GeneDef.statOffsets配置。芯片的minOutputPower字段与此对照。

---

## 3. 芯片Trion经济参数

### 3.1 系统约束回顾

```
槽位结构：左手4 + 右手4 + 特殊2 = 最多10个槽位
同时激活：左右手各最多1个（武器芯片最多同时激活2个）
           特殊槽全部同时激活/关闭
占用规则：所有已装载芯片的allocationCost在战斗体生成时全部锁定
```

### 3.2 allocationCost（占用量）

**设计约束**：中级天赋(800)装满8个普通芯片占用30-40%，紧急脱离单独占30%。

| 芯片类型 | allocationCost | 占中级max比例 | 说明 |
|---------|---------------|-------------|------|
| 轻型武器（短剑、手枪） | 25 | 3.1% | 低占用，灵活 |
| 标准武器（长剑、步枪） | 35 | 4.4% | 中等占用 |
| 重型武器（大剑、狙击） | 50 | 6.3% | 高占用，强力 |
| 护盾 | 30 | 3.8% | 防御型标准占用 |
| 辅助芯片（蓑衣虫等） | 20 | 2.5% | 轻量占用 |
| **紧急脱离系统（特殊槽）** | **240** | **30%** | 极高占用，核心取舍 |

**验证场景（中级天赋 max=800）**：

```
配置A：4轻型+4标准 = 100+140 = 240（30%）
配置B：4标准+4重型 = 140+200 = 340（42.5%）
配置C：配置A + 紧急脱离 = 240+240 = 480（60%），可用320（40%）
配置D：配置B + 紧急脱离 = 340+240 = 580（72.5%），可用220（27.5%）
```

### 3.3 activationCost（激活消耗）

芯片切换时的一次性消耗。足够小不至于让切换成为负担，但也不免费。

| 芯片类型 | activationCost | 占中级可用量比例 |
|---------|---------------|----------------|
| 轻型武器 | 5 | ~2% |
| 标准武器 | 10 | ~3-4% |
| 重型武器 | 20 | ~6-8% |
| 护盾 | 8 | ~3% |
| 辅助芯片 | 5 | ~2% |

### 3.4 trionCostPerShot（每发射击消耗）

远程人员的主要消耗来源。设计目标：远程人员一场中等战斗基本消耗完可用量。

**推导**：中级满配可用量≈280，战斗体维持≈20-30，射击消耗需≈250。
一场中等战斗约30-40发 → 每发≈7。

| 武器类型 | trionCostPerShot | 典型战斗总消耗(30发) | 说明 |
|---------|-----------------|-------------------|------|
| 轻型远程（手枪、微冲） | 4 | 120 | 低消耗高射速，续航长 |
| 标准远程（步枪） | 7 | 210 | 中等消耗，一场战斗基本耗完 |
| 重型远程（狙击、充能） | 15 | 225(15发) | 高消耗低射速，每发都是决策 |

**近战芯片**：trionCostPerShot = 0（普通挥砍不消耗Trion，符合原作弧月设定）。

### 3.5 drainPerDay（持续消耗）

大多数武器芯片无持续消耗（原作设定）。仅特殊芯片和战斗体本身有。

| 消耗源 | drainPerDay | 说明 |
|-------|------------|------|
| 普通武器/护盾芯片 | 0 | 无持续消耗 |
| 隐身类辅助芯片 | 80-120 | 持续运行的代价 |
| 战斗体本身 | 50 | 基础"存在税"，由战斗模块注册 |

> 战斗体维持消耗50/天：一场2-3分钟的战斗（约2000-3000 ticks）消耗约1.7-2.5点Trion。
> 这是很低的底噪，主要消耗来自射击和受伤流失。

---

## 4. 综合验证场景

### 4.1 中级天赋远程战斗员（标准配置）

```
角色：中级天赋，max=800
装载：2标准远程 + 2护盾 + 2辅助 + 2轻型远程 + 紧急脱离
占用：2×35 + 2×30 + 2×20 + 2×25 + 240 = 70+60+40+50+240 = 460（57.5%）
可用：340（42.5%）

一场中等战斗（约3分钟，射击35发标准远程）：
  战斗体维持：50/天 × 3min/1440min ≈ 0.1（可忽略）
  芯片激活：10（激活1个标准远程）
  射击消耗：7 × 35 = 245
  总主动消耗：≈255
  战斗后可用量：340 - 255 = 85（剩余25%可用量）

结论：紧凑但不至于耗尽，符合"紧凑型"体验 ✓
```

### 4.2 极低天赋战斗员（勉强参战）

```
角色：极低天赋，max=160
装载：2轻型远程 + 1护盾（只装3个，再多装不起）
占用：2×25 + 30 = 80（50%）
可用：80（50%）

一场中等战斗（射击20发轻型远程）：
  芯片激活：5
  射击消耗：4 × 20 = 80
  总主动消耗：85
  可用量不足！第17发左右就会耗尽。

结论：极低天赋几乎承担不起战斗消耗 ✓
如果不装紧急脱离，可用量=80，勉强打完但无余量。
```

### 4.3 高级天赋远程战斗员（充裕配置）

```
角色：高级天赋，max=1040
装载：满配8芯片 + 紧急脱离
占用：假设4标准+4重型+紧急脱离 = 140+200+240 = 580（55.8%）
可用：460（44.2%）

一场中等战斗（射击35发标准远程）：
  芯片激活：10
  射击消耗：7 × 35 = 245
  总主动消耗：≈255
  战斗后可用量：460 - 255 = 205（剩余44%可用量）

结论：高天赋者战斗后仍有充裕余量，可连续参战 ✓
```

---

## 5. GeneDef配置参考

以下为5级天赋对应的GeneDef.statOffsets参考值（取各级中位数）：

| 天赋等级 | TrionCapacity | TrionRecoveryRate | TrionOutputPower |
|---------|--------------|-------------------|-----------------|
| 极低 | 160 | 320 | 1.5 |
| 低 | 400 | 506 | 4 |
| 中 | 700 | 670 | 7 |
| 高 | 1040 | 816 | 10.5 |
| 极高 | 1400 | 947 | 14 |

> 注：实际实现时每个GeneDef定义一个天赋等级的中位值，
> 正态分布的连续随机性通过在中位值基础上施加随机偏移实现。
> 具体随机机制待实现阶段确定。

---

## 6. 待定事项

| 事项 | 说明 | 优先级 |
|------|------|--------|
| 触发角增强数值 | Hediff_TriggerHorn的statOffsets具体值 | 中 |
| 黑触发器扩容数值 | 装备时合并的额外容量 | 低（远期） |
| 训练增长系统 | 经验系统对容量的贡献 | 低（远期） |
| 流失消耗速率 | 受伤后每秒泄漏的Trion量 | 中（战斗模块设计时确定） |
| 护盾抵挡消耗 | 护盾成功抵挡攻击时的Trion消耗 | 中 |
| 正态分布随机机制 | GeneDef如何实现连续随机天赋值 | 高（实现阶段） |

---

## 历史修改记录

| 版本 | 日期 | 修改摘要 | 签名 |
|------|------|---------|------|
| v1.0 | 2026-02-26 | 创建文档。覆盖五级天赋容量分布（正态分布μ=700,σ=250）、三个派生属性公式（RecoveryRate=25.3×√max）、芯片Trion经济参数（allocationCost/activationCost/trionCostPerShot/drainPerDay）、综合验证场景（中级/极低/高级天赋）。 | Claude Opus 4.6 |

